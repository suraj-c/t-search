<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

  <title>t-search test</title>

  <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../bower_components/web-component-tester/browser.js"></script>
  <script src="../bower_components/iron-test-helpers/mock-interactions.js"></script>
  <!-- <script src="../test/t-search_test.js"></script>
  <script src="../bower_components/test-fixture/test-fixture-mocha.js"></script>-->

  <!--<link rel="import" href="../bower_components/iron-test-helpers/test-helpers.html">-->
  <link rel="import" href="../t-search.html">

</head>

<body>
  <test-fixture id="basic">
    <template>
      <t-search id="search"></t-search>
    </template>
  </test-fixture>

  <script>
    function runAfterOpen(menu, callback) {
      menu.$.menuButton.$.dropdown.addEventListener('iron-overlay-opened', function () {
        Polymer.Base.async(callback, 1);
      });
      MockInteractions.tap(menu);
    }
    suite('t-search', function () {
      //test case for initial condition in t-search.html.
      test('instantiating the element works', function () {
        var header = fixture('basic');
        assert.equal(header.is, 't-search');
      });
      var header;
      setup(function () {
        header = fixture('basic');
      });
      test('_dismisCard', function () {
        element = fixture('basic');
        element._dismisCard();
        var paperItem = element.$.needRoom;
        assert.equal(paperItem.textContent, 'Need more rooms or have children?');
      });

      test('_openDatePicker--if', function () {
        element = fixture('basic');
        var mq = window.matchMedia("(min-width: 767px)").matches;
        element._openDatePicker();
        assert.equal(element.$.end.invalid, false);

      });

      test('_doneDatePicker', function () {
        element = fixture('basic');
        element._doneDatePicker();
        assert.equal(element.doneDatePicker, true);
      });

      test('_showDPMainToolbar', function () {
        element = fixture('basic');
        var paperItem = element.$.needRoom;
        element._showDPMainToolbar();
        assert.equal(paperItem.textContent, 'Need more rooms or have children?');
      });
      test('_showDPMainToolbar-doneRoomCard', function () {
        element = fixture('basic');
        var paperItem = element.$.needRoom;
        element.doneRoomCard = true;
        element.doneRoomCardOutput = undefined;
        element._showDPMainToolbar();
        assert.equal(paperItem.textContent, 'Need more rooms or have children?');
      });
      test('_showDPMainToolbar-else', function () {
        element = fixture('basic');
        var paperItem = element.$.needRoom;
        element.doneRoomCard = false;
        element.doneRoomCardOutput = "abc";
        element._showDPMainToolbar();
        assert.equal(paperItem.textContent, 'Need more rooms or have children?');
      });

      test('_showACMainToolbar', function () {
        element = fixture('basic');
        element._showACMainToolbar();
        assert.equal(element.showToolbar, true);
      });
      test('_showDateToolbar--if', function () {
        element = fixture('basic');
        var startDate = element.$.start.value;
        element._showDateToolbar();
        assert.equal(startDate, undefined)
      });
      test('_showDateToolbar--else', function () {
        element = fixture('basic');
        element.$.start.value = new Date("05/17/17");
        element.$.end.value = new Date("05/19/17");
        var startDate = element.$.start.value;
        element._doneDatePicker();
        element._showDateToolbar();
        assert.equal(startDate.setHours(0, 0, 0, 0), new Date("05/17/17").setHours(0, 0, 0, 0));
      });

      test('_tabpress--if', function () {
        element = fixture('basic');
        var e = new KeyboardEvent("keypress", {
          view: window,
          bubbles: true,
          cancelable: true,
          key: "ArrowDown",
          code: "ArrowDown",
          keyCode: 40
        });
        element._tabPress(e);
        var paperItem = element.$.needRoom;
        assert.equal(paperItem.textContent, "Need more rooms or have children?")
      });
       test('_tabpress--else', function () {
        element = fixture('basic');
        var e = new KeyboardEvent("keypress", {
          view: window,
          bubbles: true,
          cancelable: true,
          key: "Enter",
          code: "ArrowDown",
          keyCode: 40
        });
         var paperItem = element._tabPress(e);
        assert.equal(paperItem, undefined)
      });
      test('_doneRoomCard', function () {
        element = fixture('basic');
        var card = element.$.choiceCard;
        card.$.choiceForms.render();
        var validData = element._doneRoomCard();
        assert.equal(validData, true);
      });
      test('_doneRoomCard', function () {
        element = fixture('basic');
        var card = element.$.choiceCard;
        card._addRoom();
        card.$.choiceForms.render();
        var forms = card.querySelectorAll("#choiceRoom");
        forms[1].countChildren = 2;
        forms[1].$.childAge.render();
        var validData = element._doneRoomCard();
        assert.equal(validData, undefined);
      });
      test('_removeDrop', function () {
        element = fixture('basic');
        var card = element.$.choiceCard;
        card.$.choiceForms.render();
          card._addRoom();
          card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        var returnResult = element._removeDrop();
        assert.equal(returnResult, undefined)
      });
      function setDummyInputData() {
        element = fixture('basic');
        var loc = element.$.location;
        var autoS = loc.$.autoSuggest;
        autoS.value = "London, United Kingdom";
        element.$.start.value = new Date("05/25/17");
        element.$.end.value = new Date("05/30/17");
        var menu = element.$.deskinput1;
        var menuB = menu.$.menuButton;
        var input = menuB.querySelector("#input");
        input.value = "2 Adults in 1 room";
      }

      test('_submitSearchFormInput', function (done) {
        element = fixture('basic');
        setDummyInputData();
        header = fixture('basic');
        element.dataCity = {
          additionalInfo: null,
          cityName: "London",
          code: "LON",
          countryCode: "GB",
          countryName: "United Kingdom",
          formattedAddress: "London, United Kingdom",
          geoCode: "51.50015,-0.1262362",
          id: 5778,
          name: "London",
          stateCode: "",
          stateName: "",
          type: "City"
        }
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        var returnResult = element._submitSearchFormInput(e);
        done();
        assert.equal(returnResult, false);

      });
      test('_submitSearchFormInput-if', function (done) {
        element = fixture('basic');
        var loc = element.$.location;
        var autoS = loc.$.autoSuggest;
        autoS.value = "";
        element.$.start.value = undefined;
        element.$.end.value = undefined;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        var returnResult = element._submitSearchFormInput(e);
        done();
        assert.equal(element.$.end.invalid, true);
      });
      test('_submitSearchFormInput-else-if', function (done) {
        element = fixture('basic');
        var loc = element.$.location;
        var autoS = loc.$.autoSuggest;
        autoS.value = "abc";
        element.$.start.value = undefined;
        element.$.end.value = undefined;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        var returnResult = element._submitSearchFormInput(e);
        done();
        assert.equal(element.$.start.invalid, true);
      });
      test('_submitSearchFormInput-else-if-autosuggestvalue', function (done) {
        element = fixture('basic');
        var loc = element.$.location;
        var autoS = loc.$.autoSuggest;
        autoS.value = "";
        element.$.start.value = new Date("05/25/17");
        element.$.end.value = new Date("05/31/17");
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        var returnResult = element._submitSearchFormInput(e);
        done();
        assert.equal(loc.$.autoInput.invalid, true);
      });
       test('_submitSearchFormInput-else', function (done) {
        element = fixture('basic');
         var loc = element.$.location;
        var autoS = loc.$.autoSuggest;
        autoS.value = "abc";
         element.$.start.value = new Date("05/25/17");
        element.$.end.value = new Date("05/31/17");
         var card = element.$.choiceCard;
        card._addRoom();
        card.$.choiceForms.render();
        var forms = card.querySelectorAll("#choiceRoom");
        forms[1].countChildren = 2;
        forms[1].$.childAge.render();
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        var returnResult = element._submitSearchFormInput(e);
        done();
        assert.equal(returnResult, undefined);
      });


      /***************CHOICE-CARD*******************/

      test('_onkeyPress', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
         var e = {
            "key": "Enter",
          "model": {
            "index": 1
          },
        }
        card._addRoom();
        card.$.choiceForms.render();
        card.roomCount = 2;
        card._onkeyPress(e);
        assert.equal(card.roomCount, 1);
      });
       test('_onkeyPress', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        var e = new KeyboardEvent("keypress", {
          view: window,
          bubbles: true,
          cancelable: true,
          key: "delete",
          code: "Enter",
          keyCode: 13
        });
        card._addRoom();
        card.$.choiceForms.render();
        card.roomCount = 2;
        card._onkeyPress(e);
        assert.equal(card.roomCount, 2);
      });

      test('deleteRoom function', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
         var e = {
          "model": {
            "index": 1
          },
        }
        forms.countChildren = 2;
        forms._onCount();
        card._deleteRoom(e);
        roomCount = card.roomCount;
        console.log(roomCount);
        assert.equal(roomCount, 0);
      });

      test('_idDelCal -if', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card._addRoom();
        card.$.choiceForms.render();
        var forms = card.querySelectorAll("#choiceRoom");
        var e = {
            "key": "Enter",
          "model": {
            "index": 0
          },
        }
        forms[1].countChildren = 2;
        card.$.choiceForms.render();
        i = 0;
        card._deleteRoom(e);
        card._idDelCal();
        assert.equal(roomIdArray[i], undefined);
      });

     test('_idDelCal -else', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card._addRoom();
        card.$.choiceForms.render();
        var forms = card.querySelectorAll("#choiceRoom");
        mockEvent = new Event('click');
        sinon.spy(mockEvent, 'preventDefault');
        e = mockEvent;
        console.log(card.roomCount);
        forms[1].countChildren = 2;
        i = 0;
        card._idDelCal(i);
        assert.equal(roomIdArray[i], undefined);
      });
      test('Add Room function', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card._addRoom();
        roomCount = card.roomCount;
        assert.equal(roomCount, 2);
      });
      test('displayIndex function', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        index = 0;
        var roomIndex = card._displayIndex(index);
        assert.equal(roomIndex, 1);
      });

      test('_lte', function () {
        element = fixture('basic');
        var card = element.$.choiceCard;
        card._addRoom();
        roomcount = card.roomCount;
        var result = card._lte(roomcount, 1);
        assert.equal(result, false);
      });

      test('showButton Property', function () {
        element = fixture('basic');
        var card = element.$.choiceCard;
        var mq = window.matchMedia("(max-width: 767px)").matches;
        if (mq) {
          assert.equal(card.showButton, true);
        }
        else {
          assert.equal(card.showButton, false);
        }
      });

      test("show variable for hidden traveller dropdown toggle", function () {
        assert.equal(header.showTravellersCard, true);
      });
      test("showDatePicker", function () {
        assert.equal(header.showDatePicker, true);
      });
      test("showToolbar", function () {
        assert.equal(header.showToolbar, true);
      });
      test("mobilePhone", function () {
        var mq = window.matchMedia("(max-width: 767px)").matches;
        if (mq) {
          assert.equal(header.mobilePhone, true);
        }
        else {
          assert.equal(header.mobilePhone, false);
        }
      });
      test("tabletView", function () {
        assert.equal(header.tabletView, false);
      });
      test("mediumTablet", function () {
        var mq = window.matchMedia("(max-width: 600px)").matches;
        if (mq) {
          assert.equal(header.mediumTablet, true);
        }
        else {
          assert.equal(header.mediumTablet, false);
        }
      });
      test("choice", function () {
        assert.equal(header.choice, 0);
      });

      test('_openChildForm--if', function () {
        element = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        element._openChildForm(e);
        assert.equal(element.choice, 5);
      });
      test('_doneRoom', function () {
        element = fixture('basic');
        var card = element.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        console.log(card.roomCount);
        forms.countChildren = 5;
         card.domHost.querySelector(".inputAdultCount").querySelector("#listBox").selected = 4;
       card.$.choiceForms.render();
        var validData = card._doneRoom();
        assert.equal(validData, false);
      });
     test('_idCal',function(){
        header = fixture('basic');
        var card = header.$.choiceCard;
        card._addRoom();
        card.$.choiceForms.render();
         card._addRoom();
         card.$.choiceForms.render();
          var e = {
            "key": "Enter",
          "model": {
            "index": 1
          },
        }
          card._deleteRoom(e);
           card.$.choiceForms.render();
        var forms = card.querySelectorAll("#choiceRoom");
        forms[1].countChildren = 2;
        card.$.choiceForms.render();
        i = 0;
        card._idCal();
        assert.equal(roomIdArray[i], undefined);
      });


      /***************CHOICE-FORM*******************/


      test('_childIndex', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        var index = 1;
        var returnIndex = forms._childIndex(index);
        assert.equal(returnIndex, 2);
      });
      test('_childID', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        var index = 1;
        var returnIndex = forms._childID(index);
        assert.equal(returnIndex, "1_2");
      });
      test('_displayId', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        var index = 1;
        var returnIndex = forms._displayId(index);
        assert.equal(returnIndex, 1);
      });
      test('_onCount', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        var returnIndex = forms._onCount();
        assert.equal(forms.countChildren, 0);
      });
      test('_calResultOfRoom if not mq', function () {
        element = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
        var room = card.roomCount;
        forms._calResultOfRoom(room);
        var menu = element.$.deskinput1;
        var menuB = menu.$.menuButton;
        var input = menuB.querySelector("#input");
        assert.equal(input.value, "1 Adult in 1 Room");
      });
        test('_calResultOfRoom', function(){
        element = fixture('basic');
        var card = element.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
       card.domHost.querySelector(".inputAdultCount").querySelector("#listBox").selected = 0;
       card.domHost.querySelector(".inputChildCount").querySelector("#listBox").selected = 1;      
        room = 1;
        forms._calResultOfRoom(room);
         var menu = element.$.deskinput1;
        var menuB = menu.$.menuButton;
        var input = menuB.querySelector("#input");
        assert.equal(input.value, "1 Adult in 1 Room");
      });
      test('_removeError',function(){
         header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
         forms.countChildren = 5;
        card.domHost.querySelector(".inputAdultCount").querySelector("#listBox").selected = 4;
       card.$.choiceForms.render();
        var returnIndex = forms._removeError();
        var Value = card.querySelector("#errfn").innerHTML;
        assert.equal(Value,"Maximum Paxcount 9");
      });
       test('_tabPress', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
          forms.countChildren = 2;
        card.$.choiceForms.render();
        var e = {
          "currentTarget": forms.querySelector("#child1_1"),
          "keyCode": 40
        }
        var returnIndex = forms._tabPress(e);
        assert.equal(e.currentTarget.invalid, false);
      });
       test('_tabPress', function () {
        header = fixture('basic');
        var card = header.$.choiceCard;
        card.$.choiceForms.render();
        var forms = card.querySelector("#choiceRoom");
          forms.countChildren = 2;
        card.$.choiceForms.render();
        var e = {
          "currentTarget": forms.querySelector("#child1_1"),
          "keyCode": 20
        }
        var returnIndex = forms._tabPress(e);
        assert.equal(e.currentTarget.invalid, false);
      });



      /***************T-AUTOSUGGEST*******************/

      test('_focusOnInput', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        pCard = header.$.paperCard;
        autoSuggestion._focusOnInput();
        assert.equal(pCard.style.display, 'none');
      });
      test('_focusingOut', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        spin = autoSuggestion.$.spinner;
        autoSuggestion.selectedItem = "London";
        autoSuggestion._focusingOut();
        assert.equal(spin.hidden, true);
      });
      // test('_cancel', function () {
      //   header = fixture('basic');
      //   autoSuggestion = header.$.location;
      //   autoS = autoSuggestion.$.autoSuggest;
      //   var val = autoSuggestion.selectedValue;
      //   autoSuggestion._cancel();
      //   assert.equal(autoS.value, val);
      // });
      test('_clear', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        var mq = window.matchMedia("(max-width: 767px)").matches;
        autoClearC = autoSuggestion.$.clearContainer;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        autoSuggestion._clear(e);
        if (mq) {
          assert.equal(autoClearC.style.display, 'none');
        }
      });
      test('_onFocus', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        var autoS = autoSuggestion._onFocus(e);
        assert.equal(autoS, false);
      });
      test('_onClear', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        autoSuggestion._onClear(e);
        sel = autoSuggestion.$.selectedItem;
        assert.equal(sel, null);
      });
      test('_onBlur-if', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        autoS = autoSuggestion.$.autoSuggest;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        autoSuggestion.selectedValue = "";
        autoSuggestion._onBlur(e);
        assert.equal(autoS.bindValue, '');
      });
      test('_onBlur-else', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        autoS = autoSuggestion.$.autoSuggest;
        var e = new MouseEvent("click", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
        });
        autoSuggestion.selectedValue = "abc";
        autoSuggestion._onBlur(e);
        assert.equal(autoSuggestion.$.spinner.hidden, true);
      });
      test('_selectedItemChanged', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        autoS = autoSuggestion.$.autoSuggest;
        autoSuggestion.selectedItem = 'London';
        autoSuggestion._selectedItemChanged();
        assert.equal(autoSuggestion.selectedValue, autoSuggestion.selectedItem);
      });
      test('_checkFloatedLabel--if', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        autoS = autoSuggestion.$.autoSuggest;
        autoS.value = 'London';
        autoSuggestion._checkFloatedLabel();
        var classContain = autoSuggestion.classList.contains('label-is-floating');
        assert.equal(classContain, true);
      });
      test('_checkFloatedLabel--else', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        autoS = autoSuggestion.$.autoSuggest;
        autoS.value = '';
        autoSuggestion._checkFloatedLabel();
        var classContain = autoSuggestion.classList.contains('label-is-floating');
        assert.equal(classContain, false);
      });
      test('_simpleTap', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        var e = new MouseEvent("tap", {
          view: window,
          bubbles: true,
          clientX: 20,
        });
        autoSuggestion._simpleTap(e);
        assert.equal(e.cancelBubble, true);
      });
      // test('_closeLambda', function () {
      //   header = fixture('basic');
      //   autoSuggestion = header.$.location;
      //   drop = autoSuggestion.$.dropBox;
      //   autoSuggestion._closeLambda();
      //   assert.equal(drop.className, "autocomplete ");
      // });
      test('_showReadMoreDots', function () {
        header = fixture('basic');
        autoSuggestion = header.$.location;
        autoS = autoSuggestion.$.autoSuggest;
        autoS.value = "16 Moo 5 Ban Khum, Tumbon Mae Ngon, Amphoe Fang,, Chiang Mai, ตำบล แม่งอน อำเภอ ฝาง เชียงใหม่ 50320, Thailand";
        var len = autoS.offsetWidth / 8.5;
        var l = autoSuggestion._showReadMoreDots();
        assert.equal(l, len);
      });
     

      //test case for travellers dropdown property in t-search.html 
      test("choice default value for travellers dropdown in property", function () {
        assert.equal(header.choice, '0');
      });

      //test case for appearing the date in t-search.html
      //test case for check in date picker is appearing in t-search.html
      test('keypress is appearing for check in date picker', function () {
        var myElement = document.querySelector("#start");
        if (myElement.isSelected == true) {
          assert.equal(myElement.fire(new CustomEvent('keypress')));
        }
      });
      //test case for check out date picker is appearing in t-search.html
      test('keypress is appearing for check out date picker', function () {
        var myElement = document.querySelector("#end");
        if (myElement.isSelected == true) {
          assert.equal(myElement.fire(new CustomEvent('keypress')));
        }
      });

      //test case for dropdown open in t-search
      test('travellers dropdown opens when tapped', function (isSelected) {
        if (runAfterOpen.isSelected == true) {
          var content = document.querySelector("#deskinput1");
          var contentRect = content.getBoundingClientRect();
          contentRect = content.getBoundingClientRect();
          assert.equal(content.fire(new CustomEvent('click')));
        }
        isSelected();
      });
      //test case for dropdown close in t-search.html
      test('travellers dropdown closes when an item is activated', function () {
        var content = document.querySelector("#deskinput1");
        runAfterOpen(content, function () {
          var firstItem = Polymer.dom(content).querySelector('paper-item');
          if (firstItem.click == true) {
            assert.equal(done.hide, false);
          }
          done();
        });
      });
      //test case for triggered addRoom in choice-card.html 
      test('can be triggered add room button', function (done) {
        var card = document.querySelector("#choiceCard");
        var button = card.querySelector("#button1");
        button.addEventListener('click', function () {
          done();
        });
        MockInteractions.tap(button);
      });
      //test case for triggered done in choice-card.html
      test('done button can be triggered with enter', function (done) {
        var card = document.querySelector("#choiceCard");
        var button = card.querySelector("#button2");
        button.addEventListener('click', function () {
          // expect(button.click).to.be.equal(true);
          done();
        });
        MockInteractions.pressEnter(button);
      });
      //test case for triggered addRoom by enter in choice-card.html
      test('add room button can be triggered with enter', function (done) {
        var card = document.querySelector("#choiceCard");
        var button = card.querySelector("#button1");
        button.addEventListener('click', function () {
          // expect(button.click).to.be.equal(true);
          done();
        });
        MockInteractions.pressEnter(button);
      });
      //test case for triggered used for done button which is used on the header ofdate picker on mobile screen in t-search.html
      test('done button can be triggered after selection of start and end date', function (click) {
        var startValue = document.querySelector("#start").value;
        var endValue = document.querySelector("#end").value;
        if (this.click == true) {
          assert.equal(click.startValue, click.endValue, true);
          this._showDateToolbar = true;
        }
        click();
      });
      //test case for work after clicking on clear button on autocomplete toolbar at mobile screen in t-search.html
      test(' To clear the written Input ', function (autoInput) {
        if (this.autoInput == true) {
          var node = document.querySelector("#dropBox");
          while (node.hasChildNodes()) {
            node.removeChild(node.lastChild);
          }
          assert.equal(autoInput.stopPropagation, true);
          this.clear();
        }
        autoInput();
      });
      //test case for  used for Add Room button  on click this function adds the room to form ,in choice-card.html
      test('add Room after clicking on add button', function (push) {
        if (push.isSelected) {
          selectEventCounter++;
          assert.equal(push.room, s.selectedRoom);
        }
        push();
      });
      //test case for used for delete Room button (trash icon),on click this function delete the room to form,in choice-card.html
      test('delete the Room after clicking on deleteRoom', function (splice) {
        if (this.isSelected == true) {
          assert.equal(splice.room, isSelected);
          this.roomCount = this.roomCount - 1;
        }
        splice();
      });
      // test case for done button on click it count total adults, children nad rooms from the form,in choice-card.html
      test('done the Room after clicking on doneRoom', function (isSelected) {
        if ((this.roomCount += 1) == true) {
          assert.equal(isSelected.button.doneRoom, true);
        }
        isSelected();
      });
      //test case for function is used for child dropdown on click ,this function adds the child age dropdown to form,in choice-form.html
      test('To Count the child age', function (push) {
        if (push.isSelected) {
          for (var i = 0; i < cCount; i++) {
            assert.equal(push.children, child);
          }
        }
        push();
      });
      //test case for clear the input in t-autosuggest.html
      test('To clear the written input', function (event) {
        if (this.event == true) {
          assert.equal(event.stopPropagation, true);
          Polymer.dom(this.$.clearContainer).node.setAttribute('class', 'hide');
          this.clear();
        }
        event();
      });
      //test case for to show loader while processing and the cross icon after selection to clear in autocomplete.js
      test('Test to show loader while processing and cross icon after selection to clear', function () {
        input.onkeyup = function () {
          inputValue = custParams.pre(input);
          if (inputValue.length >= component.minimumCharacters) {
            custParams = self.CustParams(input);
            assert.equal(component.$.spinner.hidden, false);
          }
        }
      });
      //test case for to show focus after typing 3 charset in autocomplete.js                    
      test('input on keyup after 3 charset', function () {
        input.onkeyup = function () {
          inputValue = custParams.pre(input);
          if (this.inputValue.length > 3) {
            custParams = self.CustParams(input);
            assert.equal(custParams.pre(input), true);
          }
        }
      });


      /***************T-CALENDAR*******************/


      //test case for checking the correct dayname when we select the date
      test('check the Day Name is correct', function (date) {
        var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        var d = new Date(date);
        var element = fixture('basic');
        start = element.$.start;
        picker = start.$.picker;
        calendar = picker.$.calendar;
        var day = calendar._checkDayName(date);
        if (d.isSelected == true) {
          var dayName = days[d.getDay()];
          assert.equal(dayName, day);
        }
        date();
      });
      //test case for the selected date should be in proper format from t-date-picker.html
      test('is selected date should be in proper dateFormat', function (isSelected) {
        var date = new Date();
        if (isSelected.date == true) {
          assert.isTrue(date.DateFormat("MM/DD/YY"));
        }
        isSelected();
      });
      //test case for checkingthe last day of month in t-calender.html
      test('check Last Day of Month', function (isSelected) {
        var date = new Date(05 / 28 / 2017);
        var element = fixture('basic');
        start = element.$.start;
        picker = start.$.picker;
        calendar = picker.$.calendar;
        var day = calendar._checkLastDayofMonth(date);
        if (date.isSelected) {
          assert.equal(day, "31");
        }
        isSelected();
      });
      //test case for checking first day of month in t-calender.html
      test('check First Day of Month', function (isSelected) {
        var date = new Date();
        var element = fixture('basic');
        start = element.$.start;
        picker = start.$.picker;
        calendar = picker.$.calendar;
        var day = calendar._checkFirstDayofMonth(date);
        if (date.isSelected) {
          assert.equal(day, "1");
        }
        isSelected();
      });
      //test case for checking the first day of week in t-calender.html
      test('check first day of week', function (isSelected) {
        var date = new Date();
        var element = fixture('basic');
        start = element.$.start;
        picker = start.$.picker;
        calendar = picker.$.calendar;
        if (date.isSelected) {
          var day = calendar._checkFirstDayofWeek(date);
          assert.equal(day, "Sunday");
        }
        isSelected();
      });

      test('check last day of week', function (isSelected) {
        var date = new Date();
        var element = fixture('basic');
        start = element.$.start;
        picker = start.$.picker;
        calendar = picker.$.calendar;
        if (date.isSelected) {
          var day = calendar._checkLastDayofWeek(date);
          assert.equal(day, "Saturday");
        }
        isSelected();
      });
      test('dateFormat', function (isSelected) {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        var date = new Date("2017-05-01");
        var d = cal.dateFormat(date);
          assert.equal("2017-05-01T05:30:00+05:30", d);
        isSelected();
      });
      test('_localeChanged', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        var day = cal._localeChanged(cal.locale);
        assert.equal(day, 0);
      });
      test('_changeMinDate', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        cal.minDate = null;
        cal.maxDate = null;
         var screen = window.matchMedia("(max-width:767px)").matches;
         if(screen){
        var date = cal._changeMinDate();
        assert.equal(date, 12);
         }
      });
      test('_isDisabled', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        day = 1;
        date = new Date("05-01-2017");
        var val = cal._isDisabled(day, date);
        assert.equal(val, true);
      });

      test('_getMonthClass', function(){
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        name = "month";
        month = {
                year: 2017, 
                month: 6, 
                date: "Sun Jul 02 2017 00:00:00 GMT+0530 (India Standard Time)"
                }
        var val = cal._getMonthClass(name, month);
        assert.equal("month month-2017-6", val);
      });
      test('_swipePrevMonth--start', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        var val = datePicker.id;
        cal._swipePrevMonth();
        assert.equal(val, "start");
      });
       test('_swipePrevMonth--end', function() {
        header = fixture('basic');
        datePickerStart = header.$.start;
        datePickerStart.value = new Date("05-19-2017");
        datePickerEnd =header.$.end;
        pick = datePickerEnd.$.picker;
        cal = pick.$.calendar;
        var val = datePickerEnd.id;
        cal._swipePrevMonth();
        assert.equal(val, "end");
      });
      test('_swipePrevMonth--else', function() {
        header = fixture('basic');
        datePickerStart = header.$.start;
        datePickerStart.value = new Date("08-19-2017");
        datePickerEnd =header.$.end;
        pick = datePickerEnd.$.picker;
        cal = pick.$.calendar;
        var val = datePickerEnd.id;
        var Swipe = cal._swipePrevMonth();
        assert.equal(Swipe, undefined);
      });
      test('_swipeNextMonth--if', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        cal._swipeNextMonth()
        assert.equal(!cal.maxDate, false);
      });
       test('_swipeNextMonth--else', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        cal.currentYear = 2018;
        var val = cal._swipeNextMonth()
        assert.equal(val, undefined);
        });
      test('_withinValidRange', function(){
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        date = new Date("11-09-2017");
        var val = cal._withinValidRange(date);
        assert.equal(val, true);
      });

      test('_monthWithinValidRange', function(){
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        year = 2017;
        month = 11;
        var val = cal._monthWithinValidRange(year, month);
        assert.equal(val, true);
      });
      test('_getDayName', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        date = new Date("11-09-2017");
        var val = cal._getDayName(date);
        assert.equal(val, "2017-11-9");
      });

 test('_onSwipe--left', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        var e = new MouseEvent("swiped", {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: 20,
          detail:{
            direction: 'left'
          },
          type: 'swiped'
        });
        var val = cal._onSwipe(e);
        assert.equal(val, true);
      });
     test('_onSwipe--right', function() {
        header = fixture('basic');
        datePicker = header.$.start;
        pick = datePicker.$.picker;
        cal = pick.$.calendar;
        var e = {
          "detail": {
            "direction":"right" 
          },
        }
        var val = cal._onSwipe(e);
        assert.equal(val, true);
      });
        test('_tapDay--start', function () {
        header = fixture('basic');
        var startInput = header.$.start;
        var startCal = startInput.querySelector("#calendar");
        var e = {
          "model": {
            "item": {
              "date": new Date("08-19-2017"),
              "day": 19,
              "month":8,
              "year": 2017
            }
          },
        }
        startCal._tapDay(e);
        assert.equal(startInput.value, startCal.date);
      });
    });
  </script>
</body>

</html>